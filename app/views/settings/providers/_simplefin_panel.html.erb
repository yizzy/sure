<div class="space-y-4">
  <div class="prose prose-sm text-secondary">
    <p class="text-primary font-medium">Setup instructions:</p>
    <ol>
      <li>Visit <a href="https://beta-bridge.simplefin.org" target="_blank" rel="noopener noreferrer" class="link">SimpleFin Bridge</a> to get your one-time setup token</li>
      <li>Paste the token below to enable SimpleFin bank data sync</li>
      <li>After a successful connection, go to the Accounts tab to set up new accounts and link them to your existing ones</li>
    </ol>

    <p class="text-primary font-medium">Field descriptions:</p>
    <ul>
      <li><strong>Setup Token:</strong> Your SimpleFin one-time setup token from SimpleFin Bridge (consumed on first use)</li>
    </ul>
  </div>

  <% if defined?(@error_message) && @error_message.present? %>
    <div class="p-2 rounded-md bg-destructive/10 text-destructive text-sm">
      <%= @error_message %>
    </div>
  <% end %>

  <%= styled_form_with model: SimplefinItem.new,
                       url: simplefin_items_path,
                       scope: :simplefin_item,
                       method: :post,
                       data: { controller: "auto-submit", action: "keydown.enter->auto-submit#submit blur->auto-submit#submit", turbo: true },
                       class: "space-y-3" do |form| %>
    <%= form.text_field :setup_token,
                        label: "Setup Token",
                        placeholder: "Paste SimpleFin setup token and press Enter",
                        type: :password,
                        data: { auto_submit_target: "input" } %>
  <% end %>

  <% if @simplefin_items&.any? %>
    <div class="flex items-center gap-2">
      <div class="w-2 h-2 bg-success rounded-full"></div>
      <p class="text-sm text-secondary">Configured and ready to use. Visit the <a href="<%= accounts_path %>" class="link">Accounts</a> tab to manage and set up accounts.</p>
    </div>
  <% else %>
    <div class="text-sm text-secondary">No SimpleFin connections yet.</div>
  <% end %>
</div>
